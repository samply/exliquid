{
  "resourceType": "Bundle",
  "type": "transaction",
  "entry": [
    {
      "resource": {
        "resourceType": "Measure",
        "id": "exliquid",
        "name": "EXLIQUID",
        "url": "https://dktk.dkfz.de/fhir/Measure/exliquid",
        "status": "active",
        "subjectCodeableConcept": {
          "coding": [
            {
              "system": "http://hl7.org/fhir/resource-types",
              "code": "Patient"
            }
          ]
        },
        "library": [
          "https://dktk.dkfz.de/fhir/Library/exliquid"
        ],
        "scoring": {
          "coding": [
            {
              "system": "http://terminology.hl7.org/CodeSystem/measure-scoring",
              "code": "cohort"
            }
          ]
        },
        "group": [
          {
            "extension": [
              {
                "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-populationBasis",
                "valueCode": "boolean"
              }
            ],
            "code": {
              "coding": [
                {
                  "system": "https://dktk.dkfz.de/fhir/CodeSystem/exliquid-measure-group",
                  "code": "patient"
                }
              ]
            },
            "population": [
              {
                "code": {
                  "coding": [
                    {
                      "system": "http://terminology.hl7.org/CodeSystem/measure-population",
                      "code": "initial-population"
                    }
                  ]
                },
                "criteria": {
                  "language": "text/cql-identifier",
                  "expression": "InInitialPopulation"
                }
              }
            ],
            "stratifier": [
              {
                "code": {
                  "coding": [
                    {
                      "system": "https://dktk.dkfz.de/fhir/CodeSystem/exliquid-stratifier",
                      "code": "diagnosis"
                    }
                  ]
                },
                "criteria": {
                  "language": "text/cql-identifier",
                  "expression": "Diagnosis"
                }
              }
            ]
          },
          {
            "extension": [
              {
                "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-populationBasis",
                "valueCode": "Specimen"
              }
            ],
            "code": {
              "coding": [
                {
                  "system": "https://dktk.dkfz.de/fhir/CodeSystem/exliquid-measure-group",
                  "code": "specimen"
                }
              ]
            },
            "population": [
              {
                "code": {
                  "coding": [
                    {
                      "system": "http://terminology.hl7.org/CodeSystem/measure-population",
                      "code": "initial-population"
                    }
                  ]
                },
                "criteria": {
                  "language": "text/cql-identifier",
                  "expression": "InInitialPopulation"
                }
              }
            ],
            "stratifier": [
              {
                "code": {
                  "coding": [
                    {
                      "system": "https://dktk.dkfz.de/fhir/CodeSystem/exliquid-stratifier",
                      "code": "plasma-diagnosis"
                    }
                  ]
                },
                "criteria": {
                  "language": "text/cql-identifier",
                  "expression": "PlasmaDiagnosis"
                }
              },
              {
                "code": {
                  "coding": [
                    {
                      "system": "https://dktk.dkfz.de/fhir/CodeSystem/exliquid-stratifier",
                      "code": "pbmc-diagnosis"
                    }
                  ]
                },
                "criteria": {
                  "language": "text/cql-identifier",
                  "expression": "PbmcDiagnosis"
                }
              }            ]
          }
        ]
      },
      "request": {
        "method": "PUT",
        "url": "Measure/exliquid"
      }
    },
    {
      "resource": {
        "resourceType": "Library",
        "id": "exliquid",
        "name": "EXLIQUID",
        "url": "https://dktk.dkfz.de/fhir/Library/exliquid",
        "status": "active",
        "type": {
          "coding": [
            {
              "system": "http://terminology.hl7.org/CodeSystem/library-type",
              "code": "logic-library"
            }
          ]
        },
        "subjectCodeableConcept": {
          "coding": [
            {
              "system": "http://hl7.org/fhir/resource-types",
              "code": "Patient"
            }
          ]
        },
        "content": [
          {
            "contentType": "text/cql",
            "data": "bGlicmFyeSBSZXRyaWV2ZQp1c2luZyBGSElSIHZlcnNpb24gJzQuMC4wJwppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzQuMC4wJwoKY29kZXN5c3RlbSBTYW1wbGVNYXRlcmlhbFR5cGU6ICdodHRwczovL2ZoaXIuYmJtcmkuZGUvQ29kZVN5c3RlbS9TYW1wbGVNYXRlcmlhbFR5cGUnCgpjb250ZXh0IFBhdGllbnQKCmRlZmluZSBJbkluaXRpYWxQb3B1bGF0aW9uOgogIGV4aXN0cwogICAgZnJvbSBbU3BlY2ltZW5dIFMKICAgIHdoZXJlIFMuaWRlbnRpZmllci5zeXN0ZW0gY29udGFpbnMgJ2h0dHBzOi8vZGt0ay5ka2Z6LmRlL2ZoaXIvTmFtaW5nU3lzdGVtL2V4bGlxdWlkLXNwZWNpbWVuJwoKZGVmaW5lIERpYWdub3NpczoKICBGaXJzdChmcm9tIFtDb25kaXRpb25dIEMKICAgIHJldHVybiBDLmNvZGUuY29kaW5nLndoZXJlKHN5c3RlbSA9ICdodHRwOi8vZmhpci5kZS9Db2RlU3lzdGVtL2RpbWRpL2ljZC0xMC1nbScpLmNvZGUuZmlyc3QoKSkKCmRlZmluZSBTYW1wbGVUeXBlOgogIEZpcnN0KGZyb20gW1NwZWNpbWVuXSBTCiAgICByZXR1cm4gUy50eXBlLmNvZGluZy53aGVyZShzeXN0ZW0gPSAnaHR0cHM6Ly9maGlyLmJibXJpLmRlL0NvZGVTeXN0ZW0vU2FtcGxlTWF0ZXJpYWxUeXBlJykuY29kZS5maXJzdCgpKQoKZGVmaW5lIFBsYXNtYURpYWdub3NpczoKICBpZiBleGlzdHMgW1NwZWNpbWVuOiBDb2RlICdibG9vZC1wbGFzbWEnIGZyb20gU2FtcGxlTWF0ZXJpYWxUeXBlXSB0aGVuIERpYWdub3NpcyBlbHNlIG51bGwKCmRlZmluZSBQYm1jRGlhZ25vc2lzOgogIGlmIGV4aXN0cyBbU3BlY2ltZW46IENvZGUgJ3BlcmlwaGVyYWwtYmxvb2QtY2VsbHMtdml0YWwnIGZyb20gU2FtcGxlTWF0ZXJpYWxUeXBlXSB0aGVuIERpYWdub3NpcyBlbHNlIG51bGwK"
          }
        ]
      },
      "request": {
        "method": "PUT",
        "url": "Library/exliquid"
      }
    }
  ]
}
